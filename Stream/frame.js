const bigIframe=document.getElementById("big-iframe");const videoPreviewsContainer=document.getElementById("video-previews");const prevButton=document.getElementById("prev-button");let currentPage=1;const videosPerPage=4;const maxDisplayedPages=3;let links=[];let seriesTitle="";let initialLink="";window.addEventListener("message",function(a){if(a.data&&a.data.links&&a.data.seriesTitle){links=a.data.links;seriesTitle=a.data.seriesTitle;initialLink=a.data.initialLink;generateVideoPreviews()}});function generateVideoPreviews(){videoPreviewsContainer.innerHTML="";for(let i=0;i<links.length;i++){const d=links[i];const e=document.createElement("div");e.classList.add("video-preview");e.addEventListener("click",function(){changeIframeSource(d)});const c=document.createElement("iframe");c.src=d;c.frameborder="0";c.width="160";c.height="90";c.allowfullscreen=true;c.allow="autoplay";c.style.pointerEvents="none";c.style.border="none";const b=document.createElement("span");b.classList.add("video-title");const a=(i+1).toString().padStart(2,"0");b.textContent="[WeebVoice] "+seriesTitle+"-"+a;e.appendChild(c);e.appendChild(b);videoPreviewsContainer.appendChild(e)}showVideos();if(initialLink){bigIframe.src=initialLink}}function showVideos(){const c=(currentPage-1)*videosPerPage;const b=c+videosPerPage;const a=Array.from(videoPreviewsContainer.children);for(let i=0;i<a.length;i++){if(i>=c&&i<b){a[i].classList.remove("hidden")}else{a[i].classList.add("hidden")}}updatePagination()}function updatePagination(){const g=Math.ceil(links.length/videosPerPage);const d=document.getElementById("pagination");d.innerHTML="";if(g>1){const a=document.createElement("div");a.classList.add("page-numbers");a.style.margin="20px 0";if(currentPage>1){const f=document.createElement("button");f.classList.add("page-number");f.textContent="Prev";f.addEventListener("click",function(){goToPage(currentPage-1)});a.appendChild(f)}const e=3;let startPage,endPage;if(currentPage<=Math.ceil(e/2)){startPage=1;endPage=Math.min(e,g)}else{if(currentPage>=g-Math.floor(e/2)){startPage=g-e+1;endPage=g}else{startPage=currentPage-Math.floor(e/2);endPage=currentPage+Math.ceil(e/2)-1}}for(let i=startPage;i<=endPage;i++){const c=document.createElement("button");c.classList.add("page-number");c.textContent=i;c.addEventListener("click",function(){goToPage(i)});if(i===currentPage){c.style.backgroundColor="#ff1a00";c.style.color="#ffffff"}a.appendChild(c)}if(currentPage<g){const b=document.createElement("button");b.classList.add("page-number");b.textContent="Next";b.addEventListener("click",function(){goToPage(currentPage+1)});a.appendChild(b)}d.appendChild(a);prevButton.disabled=currentPage===1}}function goToPage(a){currentPage=a;showVideos()}prevButton.addEventListener("click",function(){if(currentPage>1){currentPage--;showVideos()}});function changeIframeSource(a){bigIframe.src=a};